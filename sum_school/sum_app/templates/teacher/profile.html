{% extends "layouts/base.html" %} 
{% load static %}
{% load heroicons %}

{% block title %}Profile{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static "css/profile.css" %}">
{% endblock%}

{% block content %}
    <div class='position-absolute w-100 h-100 overflow-x-hidden overflow-y-scroll p-2'>
        <div class='profile'>
            <div class='d-flex button-gp py-4'>
                <h4>Your Account Settings</h4>
                <div>
                    <a href="{% url "sum_teacher:teacher_dashboard" %}" class='back-btn'>Back</a>
                    <a href="{% url "sum_teacher:logout" %}" class='logout--btn'>Logout</a>
                </div>
            </div>
            <div class="d-flex flex-column gap-3 user-info--update">
                <form method='POST' action="{% url "sum_teacher:updateuserdata" %}" class='profile--form'>
                    {% csrf_token %}
                    <h3 class='mb-5'>Your Profile</h3>

                    <div class="form-group profile--input">
                        <label for="name">Name</label>
                        <input
                        type="text"
                        class="form-control"
                        id="name"
                        name='name'
                        value='{{user.name}}'
                        required
                        />
                    </div>

                    <div class="form-group profile--input">
                        <label for="email">Email</label>
                        <input
                        type="email"
                        class="form-control"
                        id="email"
                        name='email'
                        value='{{user.email}}'
                        required
                        />
                    </div>

                    <div class="form--group mt-2 p-2 d-flex justify-content-end">
                        <button type="submit" class="profile--submit">Save Settings</button>
                    </div>
                </form>
                
                <form method='POST' action="{% url "sum_teacher:updatepassword" %}" class='profile--form'>
                    {% csrf_token %}
                    <h3 class='mb-5'>Update Password</h3>

                    <div class="form-group profile--input">
                        <label for="current-passowrd">Current Password</label>
                        <input
                        type="password"
                        class="form-control"
                        id="old-password"
                        name='current-password'
                        required
                        />
                
                        <button type="button" class="eye-icon" id="toggle-old-password">
                            <span id="old-eye-visible" class="d-block">
                                {% heroicon_outline "eye" class="w-5 h-5 text-secondary" %}
                            </span>
                            <span id="old-eye-hidden" class="d-none">
                                {% heroicon_outline "eye-slash" class="w-5 h-5 text-secondary" %}
                            </span>
                        </button>
                    </div>

                    <div class="form-group profile--input">
                        <label for="password">Password</label>
                        <input
                        type="password"
                        class="form-control"
                        id="new-password"
                        name='password'
                        required
                        />
                
                        <button type="button" class="eye-icon" id="toggle-new-password">
                            <span id="new-eye-visible" class="d-block">
                                {% heroicon_outline "eye" class="w-5 h-5 text-secondary" %}
                            </span>
                            <span id="new-eye-hidden" class="d-none">
                                {% heroicon_outline "eye-slash" class="w-5 h-5 text-secondary" %}
                            </span>
                        </button>
                    </div>

                    <div class="form-group profile--input">
                        <label for="confirm-password">Confirm Password</label>
                        <input
                        type="password"
                        class="form-control"
                        id="cf-password"
                        name='confirm-password'
                        required
                        />
                
                        <button type="button" class="eye-icon" id="toggle-cf-password">
                            <span id="cf-eye-visible" class="d-block">
                                {% heroicon_outline "eye" class="w-5 h-5 text-secondary" %}
                            </span>
                            <span id="cf-eye-hidden" class="d-none">
                                {% heroicon_outline "eye-slash" class="w-5 h-5 text-secondary" %}
                            </span>
                        </button>
                    </div>

                    <div class="form--group mt-2 p-2 d-flex justify-content-end">
                        <button type="submit" class="profile--submit">Update Password</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    {% if messages %}
        <div class="alert-msg">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} mb-1">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/admin/profile/edit_password.js' %}"></script>
{% endblock %}
